<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Test API Cons</title>
	</head>
	<body>

		<div id="demo">
			<h1>The XMLHttpRequest Object</h1>
			<button type="button" onclick="makeCorsRequest()">Change Content</button>
		</div>

		<script>

			function loadDoc() {
				var route = "Express - Target - Hwy 252 and 73rd Av P&R - Mpls";
				var stop = "Target North Campus Building F";
				var direction = "south";
				var route2 = "METRO Blue Line";
				var stop2 = "Target Field Station Platform 1";
				var direction2 = "south";
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function () {
					if (this.readyState == 4 && this.status == 200) {
						  document.getElementById("demo").innerHTML =
			  this.responseText;
						console.log(this.response);
					}
				};
				xhttp.with
				var url = "http://svc.metrotransit.org/NexTrip/Directions/" + route2;
				//var url = "http://svc.metrotransit.org/NexTrip/" + route2 + "/" + direction2 + "/" + stop2;
				xhttp.open("GET", url);
				xhttp.send();
			}

			// Create the XHR object.
			function createCORSRequest(method, url) {
				var xhr = new XMLHttpRequest();
				if ("withCredentials" in xhr) {
					// XHR for Chrome/Firefox/Opera/Safari.
					xhr.open(method, url, true);
				} else if (typeof XDomainRequest != "undefined") {
					// XDomainRequest for IE.
					xhr = new XDomainRequest();
					xhr.open(method, url);
				} else {
					// CORS not supported.
					xhr = null;
				}
				return xhr;
			}
				// Make the actual CORS request.
			function makeCorsRequest() {
				// This is a sample server that supports CORS.
				var route = "Express - Target - Hwy 252 and 73rd Av P&R - Mpls";
				var direction = "south";
				var stop = "Target North Campus Building F";
				var route2 = "METRO Blue Line";
				var direction2 = "south";
				var stop2 = "Target Field Station Platform 1";
				var url = "http://svc.metrotransit.org/NexTrip/Directions/" + 8901;
				//var url = "http://svc.metrotransit.org/NexTrip/" + route2 + "/" + direction2 + "/" + stop2;
				var xhr = createCORSRequest('GET', url);

				if (!xhr) {
					alert('CORS not supported');
					return;
				}

				// Response handlers.
				xhr.onload = function () {
					var text = xhr.responseText;
					console.log(xhr.response);
					alert('Response from CORS request to ' + url + ': ' + text);
				};

				xhr.onerror = function () {
					alert('Woops, there was an error making the request.');
				};
				xhr.send();
			}

		</script>

	</body>
</html>
